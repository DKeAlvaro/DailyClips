<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Daily Clips is a free, no ads no registration webapp focused on improving english pronunciation. App shows users 5 different movie clips a day and allows them to repeat what they said. User's pronunciation is scored using a speech to text model.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HRYNBQ3625"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-HRYNBQ3625');
    </script>
    <title>Daily Clips - App</title> <!-- Changed title slightly -->
    <link rel="icon" type="image/x-icon" href="static/favicon.ico">
    <link rel="stylesheet" href="static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="wave-container">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>
    <div class="page-container">

        <main class="main-content">
            <div class="header-container">
                <svg xmlns="http://www.w3.org/2000/svg" width="200" height="60" viewBox="0 0 400 120" class="active logo" id="animated-svg">
                    <style>
                        .svg-elem-1 {
                            stroke-dashoffset: 541.9140625px;
                            stroke-dasharray: 541.9140625px;
                            -webkit-transition: stroke-dashoffset 1s cubic-bezier(0.47, 0, 0.745, 0.715) 0s;
                                    transition: stroke-dashoffset 1s cubic-bezier(0.47, 0, 0.745, 0.715) 0s;
                        }
                        svg.active .svg-elem-1 {
                            stroke-dashoffset: 0;
                        }
                    </style>
                    <path d="M80 30a20 20 0 0 1 40 0v40a20 20 0 0 1-40 0v-30a10 10 0 0 1 20 0v30a5 5 0 0 0 10 0V30a20 20 0 0 0-40 0v40a30 30 0 0 0 60 0v-30" fill="none" stroke="#007bff" stroke-width="8" class="svg-elem-1"></path>
                    <text x="150" y="75" font-family="Arial, sans-serif" font-size="48" fill="#ffff" font-weight="bold">DailyClips</text>
                </svg>
                <a href="https://buymeacoffee.com/alvarobuildinpublic" target="_blank" rel="noopener noreferrer">
                    <button class="bmc-button">
                        <img src="static/images/buymeacoffee.svg" alt="Buy me a coffee">
                    </button>
                </a>
            </div>
            <script>
                // Ensure this SVG specific script is here for the app page
                const svgApp = document.getElementById('animated-svg');
                 if (svgApp) {
                    svgApp.classList.add('active'); // Start animated
                    svgApp.addEventListener('click', () => {
                        svgApp.classList.toggle('active');
                    });
                }
            </script>
            <div class="video-container">
                <a href="#" class="video-nav prev" id="prev-video">
                    <span class="arrow">←</span>
                </a>
                <a href="#" class="video-nav next" id="next-video">
                    <span class="arrow">→</span>
                </a>
                <video id="mainVideo" preload="metadata">
                    <source src="" type="video/mp4" id="video-source">
                    <!-- Debug script, can be removed or kept as is -->
                    <script>
                        document.addEventListener('DOMContentLoaded', () => {
                            const videoSource = document.getElementById('video-source');
                            // console.log('Current video source (app.html):', videoSource.src);
                        });
                    </script>
                    Your browser does not support the video tag.
                </video>
                <div class="controls desktop-controls">
                    <button class="play-pause-btn">Play</button>
                    <button class="record-btn" style="display: none;">Record</button>
                    <button class="play-again-btn" style="display: none;">Replay</button>
                </div>
            </div>
            <div class="clip-legend">
                <span id="video-title"></span>
            </div>
            
            <div class="controls mobile-controls">
                <button class="play-pause-btn">Play</button>
                <button class="record-btn" style="display: none;">Record</button>
                <button class="play-again-btn" style="display: none;">Replay</button>
            </div>
            <p id="no-videos-message" style="display:none;">No video files found in the static/videos directory.</p>
        </main>
    </div>
    <script>
        let currentVideoIndex = 0; // Global index for tracking video
        // const subtitlesData = []; // subtitlesData is now primarily managed within VideoController via window.subtitlesData
        // const savedScores = {}; // savedScores also seems managed or implicitly handled elsewhere / server-side
        const videoFiles = [
            'static/videos/BillGatesNvidiaCeoJensenHuangIsCorrectAboutQuantumComputingShorts.mp4',
            'static/videos/SDarkMatterGunReviewBigPaintballShorts.mp4',
            'static/videos/SweaterWeatherShortsAnimation.mp4',
            'static/videos/TommyinnitTriesToKillTechnobladeOnDreamSmpMinecraft.mp4',
            'static/videos/WestworldIsInsaneShortsMovieWestworld.mp4',
        ];
        
        // This function might still be useful if direct manipulation is needed,
        // but VideoController now handles src updates during navigation.
        function setVideoSource(index) {
            currentVideoIndex = index;
            const videoSource = document.getElementById('video-source');
            videoSource.src = videoFiles[currentVideoIndex];
            const mainVideo = document.getElementById('mainVideo');
            if (mainVideo) {
                mainVideo.load(); // Reload the video
            }
        }
    
        // Initialize the first video if videoFiles is populated and mainVideo exists
        if (videoFiles.length > 0 && document.getElementById('mainVideo')) {
             // VideoController will handle initial video load based on currentVideoIndex (0)
        }
    
        // console.log('Video files (app.html):', videoFiles);
        // if (videoFiles.length > 0) {
        //     console.log('Current video (app.html initial):', videoFiles[currentVideoIndex]);
        // }
    </script>
    
    <script src="static/js/asr-client.js"></script>
    <script src="static/js/video-controls.js"></script>
</body>
</html> 